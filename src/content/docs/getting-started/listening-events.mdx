---
title: Listening discord events
---

import { FileTree } from '@astrojs/starlight/components'

:::note

This section is only necessary for gateway applications, so if your bot is build in http application-only you can skip this section.

:::

## Updating seyfert config

Before start this chapter we need to update `seyfert.config.js` to tell seyfert where will be our events file.

```ts {11} title="seyfert.config.js" showLineNumbers
// @ts-check
const { config } = require('seyfert');

module.exports = config.bot({
  token: process.env.BOT_TOKEN ?? "",
  intents: ["Guilds"],
  locations: {
    base: "src",
    output: "dist",
    commands: "commands",
    events: "events" // - src/events will be our events directory
  }
});
```

## Listening Event

Each event file needs to export default the `createEvent` function in order to seyfert can load them

Let's listen the `botReady` event as first example

```ts title="src/events/botReady.ts" showLineNumbers
import { createEvent } from "seyfert";

export default createEvent({
  data: { once: true, name: "botReady" },
  run(user, client) {
    client.logger.info(`${user.username} is ready`);
  }
})
```


Let's check another example with `guildDelete` event:

```ts title="src/events/guildDelete.ts" showLineNumbers
import { createEvent } from "seyfert";

export default createEvent({
  data: { name: "guildDelete" },
  run(unguild, client) {
    if (unguild.unavailable) return;
    client.logger.info(`I have been kicked out of: ${unguild.id}`);
  }
})
```

Below is the current file tree of the project if you have followed the previous steps.

<FileTree>
- src
	- commands
		- ping.ts
	- events
		- **botReady.ts**
		- **guildDelete.ts**
	- index.ts
- package.json
- seyfert.config.js
- .env
- tsconfig.json
</FileTree>